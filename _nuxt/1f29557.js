(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{470:function(t,e,n){"use strict";n.d(e,"a",(function(){return Wt}));var r=n(386),o=n(311),l=n(309),h=n(316),c={get:function(t,e,n){var r=l.d((d[t]||{})[e]);return n&&l.r(r)?r[r.length-1]:r}},d={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},f=c,v=n(339),y=n(313),_=l.j,m=l.x,x=-1,S=function(){function t(option){var e=option.mappingMethod,n=option.type,r=this.option=l.d(option);this.type=n,this.mappingMethod=e,this._normalizeData=z[e];var o=t.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[e],"piecewise"===e?(w(r),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,l.j(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(r)):"category"===e?r.categories?function(t){var e=t.categories,n=t.categoryMap={},r=t.visual;if(_(e,(function(t,e){n[t]=e})),!l.r(r)){var o=[];l.x(r)?_(r,(function(t,e){var r=n[e];o[null!=r?r:x]=t})):o[-1]=r,r=T(t,o)}for(var i=e.length-1;i>=0;i--)null==r[i]&&(delete n[e[i]],e.pop())}(r):w(r,!0):(l.b("linear"!==e||r.dataExtent),w(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return l.c(this._normalizeData,this)},t.listVisualTypes=function(){return l.C(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){l.x(t)?l.j(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,r){var o,h=l.r(e)?[]:l.x(e)?{}:(o=!0,null);return t.eachVisual(e,(function(t,e){var l=n.call(r,t,e);o?h=l:h[e]=l})),h},t.retrieveVisuals=function(e){var n,r={};return e&&_(t.visualHandlers,(function(t,o){e.hasOwnProperty(o)&&(r[o]=e[o],n=!0)})),n?r:null},t.prepareVisualTypes=function(t){if(l.r(t))t=t.slice();else{if(!m(t))return[];var e=[];_(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var r,o=1/0,i=0,l=e.length;i<l;i++){var h=e[i].value;if(null!=h){if(h===t||"string"==typeof h&&h===t+"")return i;n&&v(h,i)}}for(i=0,l=e.length;i<l;i++){var c=e[i],d=c.interval,f=c.close;if(d){if(d[0]===-1/0){if(D(f[1],t,d[1]))return i}else if(d[1]===1/0){if(D(f[0],d[0],t))return i}else if(D(f[0],d[0],t)&&D(f[1],t,d[1]))return i;n&&v(d[0],i),n&&v(d[1],i)}}if(n)return t===1/0?e.length-1:t===-1/0?0:r;function v(e,n){var l=Math.abs(e-t);l<o&&(o=l,r=n)}},t.visualHandlers={color:{applyVisual:O("color"),getColorMapper:function(){var t=this.option;return l.c("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),L.call(this,t)}:function(e,n,r){var o=!!r;return!n&&(e=this._normalizeData(e)),r=v.a(e,t.parsedVisual,r),o?r:v.g(r,"rgba")},this)},_normalizedToVisual:{linear:function(t){return v.g(v.a(t,this.option.parsedVisual),"rgba")},category:L,piecewise:function(t,e){var n=V.call(this,e);return null==n&&(n=v.g(v.a(t,this.option.parsedVisual),"rgba")),n},fixed:C}},colorHue:M((function(t,e){return v.e(t,e)})),colorSaturation:M((function(t,e){return v.e(t,null,e)})),colorLightness:M((function(t,e){return v.e(t,null,null,e)})),colorAlpha:M((function(t,e){return v.d(t,e)})),decal:{applyVisual:O("decal"),_normalizedToVisual:{linear:null,category:L,piecewise:null,fixed:null}},opacity:{applyVisual:O("opacity"),_normalizedToVisual:R([0,1])},liftZ:{applyVisual:O("liftZ"),_normalizedToVisual:{linear:C,category:C,piecewise:C,fixed:C}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:I,category:L,piecewise:function(t,e){var n=V.call(this,e);return null==n&&(n=I.call(this,t)),n},fixed:C}},symbolSize:{applyVisual:O("symbolSize"),_normalizedToVisual:R([0,1])}},t}();function w(t,e){var n=t.visual,r=[];l.x(n)?_(n,(function(t){r.push(t)})):null!=n&&r.push(n);e||1!==r.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(r[1]=r[0]),T(t,r)}function M(t){return{applyVisual:function(e,n,r){var o=this.mapValueToVisual(e);r("color",t(n("color"),o))},_normalizedToVisual:R([0,1])}}function I(t){var e=this.option.visual;return e[Math.round(Object(y.h)(t,[0,1],[0,e.length-1],!0))]||{}}function O(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function L(t){var e=this.option.visual;return e[this.option.loop&&t!==x?t%e.length:t]}function C(){return this.option.visual[0]}function R(t){return{linear:function(e){return Object(y.h)(e,t,this.option.visual,!0)},category:L,piecewise:function(e,n){var r=V.call(this,n);return null==r&&(r=Object(y.h)(e,t,this.option.visual,!0)),r},fixed:C}}function V(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=n[S.findPieceIndex(t,n)];if(r&&r.visual)return r.visual[this.type]}}function T(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=l.E(e,(function(t){return v.f(t)}))),e}var z={linear:function(t){return Object(y.h)(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=S.findPieceIndex(t,e,!0);if(null!=n)return Object(y.h)(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?x:e},fixed:l.H};function D(t,a,b){return t?a<=b:a<b}var j=S,k=n(377),P=l.j;function H(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function B(option,t,e){var n={};return P(t,(function(t){var r,o=n[t]=((r=function(){}).prototype.__hidden=r.prototype,new r);P(option[t],(function(n,r){if(j.isValidType(r)){var h={type:r,visual:n};e&&e(h,t),o[r]=new j(h),"opacity"===r&&((h=l.d(h)).type="colorAlpha",o.__hidden.__alphaForOpacity=new j(h))}}))})),n}var E=n(312),A=n(349),F=j.mapVisual,G=j.eachVisual,W=l.r,N=l.j,X=y.a,U=y.h,Y=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return Object(o.a)(e,t),e.prototype.init=function(option,t,e){this.mergeDefaultAndTheme(option,e)},e.prototype.optionUpdated=function(t,e){var n=this.option;h.a.canvasSupported||(n.realtime=!1),!e&&function(t,e,n){var r;l.j(n,(function(t){e.hasOwnProperty(t)&&H(e[t])&&(r=!0)})),r&&l.j(n,(function(n){e.hasOwnProperty(n)&&H(e[n])?t[n]=l.d(e[n]):delete t[n]}))}(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=l.c(t,this),this.controllerVisuals=B(this.option.controller,e,t),this.targetVisuals=B(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=E.o(t),e},e.prototype.eachTargetSeries=function(t,e){l.j(this.getTargetSeriesIndices(),(function(n){var r=this.ecModel.getSeriesByIndex(n);r&&t.call(e,r)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var r,option=this.option,o=option.precision,h=this.dataBound,c=option.formatter;n=n||["<",">"],l.r(t)&&(t=t.slice(),r=!0);var d=e?t:r?[f(t[0]),f(t[1])]:f(t);return l.z(c)?c.replace("{value}",r?d[0]:d).replace("{value2}",r?d[1]:d):l.u(c)?r?c(t[0],t[1]):c(t):r?t[0]===h[0]?n[0]+" "+d[1]:t[1]===h[1]?n[1]+" "+d[0]:d[0]+" - "+d[1]:d;function f(t){return t===h[0]?"min":t===h[1]?"max":(+t).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,e=X([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimension=function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var r=t.dimensions,i=r.length-1;i>=0;i--){var o=r[i];if(!t.getDimensionInfo(o).isCalculationCoord)return o}}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,base={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),r=e.controller||(e.controller={});l.F(n,base),l.F(r,base);var o=this.isCategory();function h(base){W(e.color)&&!base.inRange&&(base.inRange={color:e.color.slice().reverse()}),base.inRange=base.inRange||{color:t.get("gradientColor")}}h.call(this,n),h.call(this,r),function(base,t,e){var n=base[t],r=base[e];n&&!r&&(r=base[e]={},N(n,(function(t,e){if(j.isValidType(e)){var n=f.get(e,"inactive",o);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,r=this.get("inactiveColor"),h=this.getItemSymbol()||"roundRect";N(this.stateList,(function(c){var d=this.itemSize,f=t[c];f||(f=t[c]={color:o?r:[r]}),null==f.symbol&&(f.symbol=e&&l.d(e)||(o?h:[h])),null==f.symbolSize&&(f.symbolSize=n&&l.d(n)||(o?d[0]:[d[0],d[0]])),f.symbol=F(f.symbol,(function(symbol){return"none"===symbol?h:symbol}));var v=f.symbolSize;if(null!=v){var y=-1/0;G(v,(function(t){t>y&&(y=t)})),f.symbolSize=F(v,(function(t){return U(t,[0,y],[0,d[0]],!0)}))}}),this)}.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(A.a),component=n(341),K=[20,140];function Z(t,e,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,o=n[0],l=[],i=0;i<=200&&o<n[1];i++)l.push(o),o+=r;return l.push(n[1]),l}var J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(o.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=K[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=K[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):l.r(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),l.j(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=y.a((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var r=[],data=n.getData();data.each(this.getDataDimension(data),(function(e,n){t[0]<=e&&e<=t[1]&&r.push(n)}),this),e.push({seriesId:n.id,dataIndex:r})}),this),e},e.prototype.getVisualMeta=function(t){var e=Z(this,"outOfRange",this.getExtent()),n=Z(this,"inRange",this.option.range.slice()),r=[];function o(e,n){r.push({value:e,color:t(e,n)})}for(var l=0,h=0,c=n.length,d=e.length;h<d&&(!n.length||e[h]<=n[0]);h++)e[h]<n[l]&&o(e[h],"outOfRange");for(var f=1;l<c;l++,f=0)f&&r.length&&o(n[l],"outOfRange"),o(n[l],"inRange");for(f=1;h<d;h++)(!n.length||n[n.length-1]<e[h])&&(f&&(r.length&&o(r[r.length-1].value,"outOfRange"),f=0),o(e[h],"outOfRange"));var v=r.length;return{stops:r,outerColors:[v?r[0].color:"transparent",v?r[v-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Object(component.d)(Y.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(Y),Q=n(412),$=n(375),tt=n(443),et=n(333),it=n(318),nt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return Object(o.a)(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,r){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,r):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=et.g(e.get("padding")||0),rect=t.getBoundingRect();t.add(new tt.a({z2:-1,silent:!0,shape:{x:rect.x-n[3],y:rect.y-n[0],width:rect.width+n[3]+n[1],height:rect.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var r=(n=n||{}).forceState,o=this.visualMapModel,h={};if("color"===e){var c=o.get("contentColor");h.color=c}function d(t){return h[t]}function f(t,e){h[t]=e}var v=o.controllerVisuals[r||o.getValueState(t)],y=j.prepareVisualTypes(v);return l.j(y,(function(r){var o=v[r];n.convertOpacityToAlpha&&"opacity"===r&&(r="colorAlpha",o=v.__alphaForOpacity),j.dependsOn(r,e)&&o&&o.applyVisual(t,d,f)})),h[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;it.f(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,r){},e.type="visualMap",e}(n(365).a),at=n(432),ot=n(411),st=n(314),lt=n(458);function ht(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function ut(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var ct=[["left","right","width"],["top","bottom","height"]];function pt(t,e,n){var r=t.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var l={width:e.getWidth(),height:e.getHeight()},h="horizontal"===r.orient?1:0,c=ct[h],d=[0,null,10],f={},i=0;i<3;i++)f[ct[1-h][i]]=d[i],f[c[i]]=2===i?n[0]:r[c[i]];var v=[["x","width",3],["y","height",0]][h],rect=Object(it.d)(f,l,r.padding);return c[(rect.margin[v[2]]||0)+rect[v[0]]+.5*rect[v[1]]<.5*l[v[1]]?0:1]}function ft(t,e){return l.j(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var gt=n(330),vt=n(328),symbol=n(342),yt=n(322),_t=n(332),mt=y.h,xt=l.j,bt=Math.min,St=Math.max;function wt(t,cursor,e,n){return new lt.a({shape:{points:t},draggable:!!e,cursor:cursor,drift:e,onmousemove:function(t){$.f(t.event)},ondragend:n})}function Mt(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function It(t){return"vertical"===t?"ns-resize":"ew-resize"}var Ot=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return Object(o.a)(e,t),e.prototype.doRender=function(t,e,n,r){this._api=n,r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var text=e[1-n];text=null!=text?text+"":"";var r=this.visualMapModel,o=r.get("textGap"),l=r.itemSize,h=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,0===n?-o:l[1]+o],h),d=this._applyTransform(0===n?"bottom":"top",h),f=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new at.a({style:{x:c[0],y:c[1],verticalAlign:"horizontal"===f?"middle":d,align:"horizontal"===f?d:"center",text:text,font:v.getFont(),fill:v.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,r=e.itemSize,o=this._orient,h=this._useHandle,c=pt(e,this.api,r),d=n.mainGroup=this._createBarGroup(c),f=new ot.a;d.add(f),f.add(n.outOfRange=wt()),f.add(n.inRange=wt(null,h?It(this._orient):null,l.c(this._dragHandle,this,"all",!1),l.c(this._dragHandle,this,"all",!0))),f.setClipPath(new tt.a({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var v=e.textStyleModel.getTextRect("国"),y=St(v.width,v.height);h&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,d,0,r,y,o),this._createHandle(e,d,1,r,y,o)),this._createIndicator(e,d,r,y,o),t.add(d)},e.prototype._createHandle=function(t,e,n,r,o,h){var c=l.c(this._dragHandle,this,n,!1),d=l.c(this._dragHandle,this,n,!0),f=Object(gt.h)(t.get("handleSize"),r[0]),v=Object(symbol.a)(t.get("handleIcon"),-f/2,-f/2,f,f,null,!0),cursor=It(this._orient);v.attr({cursor:cursor,draggable:!0,drift:c,ondragend:d,onmousemove:function(t){$.f(t.event)}}),v.x=r[0]/2,v.useStyle(t.getModel("handleStyle").getItemStyle()),v.setStyle({strokeNoScale:!0,strokeFirst:!0}),v.style.lineWidth*=2,v.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(vt.C)(v,!0),e.add(v);var y=this.visualMapModel.textStyleModel,_=new at.a({cursor:cursor,draggable:!0,drift:c,onmousemove:function(t){$.f(t.event)},ondragend:d,style:{x:0,y:0,text:"",font:y.getFont(),fill:y.getTextColor()}});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var m=[f,0],x=this._shapes;x.handleThumbs[n]=v,x.handleLabelPoints[n]=m,x.handleLabels[n]=_},e.prototype._createIndicator=function(t,e,n,r,o){var h=Object(gt.h)(t.get("indicatorSize"),n[0]),c=Object(symbol.a)(t.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var d=t.getModel("indicatorStyle").getItemStyle();if(c instanceof yt.a){var f=c.style;c.useStyle(l.l({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},d))}else c.useStyle(d);e.add(c);var v=this.visualMapModel.textStyleModel,y=new at.a({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:v.getFont(),fill:v.getTextColor()}});this.group.add(y);var _=[("horizontal"===o?r/2:6)+n[0]/2,0],m=this._shapes;m.indicator=c,m.indicatorLabel=y,m.indicatorLabelPoint=_,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,r){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([n,r],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():Mt(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),r=[0,t.itemSize[1]];this._handleEnds=[mt(e[0],n,r,!0),mt(e[1],n,r,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,r=this._handleEnds,o=[0,n.itemSize[1]];!function(t,e,n,r,o,l){t=t||0;var h=n[1]-n[0];if(null!=o&&(o=ut(o,[0,h])),null!=l&&(l=Math.max(l,null!=o?o:0)),"all"===r){var c=Math.abs(e[1]-e[0]);c=ut(c,[0,h]),o=l=ut(c,[o,l]),r=0}e[0]=ut(e[0],n),e[1]=ut(e[1],n);var d=ht(e,r);e[r]+=t;var f,v=o||0,y=n.slice();d.sign<0?y[0]+=v:y[1]-=v,e[r]=ut(e[r],y),f=ht(e,r),null!=o&&(f.sign!==d.sign||f.span<o)&&(e[1-r]=e[r]+d.sign*o),f=ht(e,r),null!=l&&f.span>l&&(e[1-r]=e[r]+f.sign*l)}(e,r,o,t,0);var l=n.getExtent();this._dataInterval=[mt(r[0],o,l,!0),mt(r[1],o,l,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),r=this._shapes,o=[0,e.itemSize[1]],l=t?o:this._handleEnds,h=this._createBarVisual(this._dataInterval,n,l,"inRange"),c=this._createBarVisual(n,n,o,"outOfRange");r.inRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),r.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(l,h)},e.prototype._createBarVisual=function(t,e,n,r){var o={forceState:r,convertOpacityToAlpha:!0},l=this._makeColorGradient(t,o),h=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(n,h);return{barColor:new Q.a(0,0,0,1,l),barPoints:c,handlesColor:[l[0].color,l[l.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],r=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<100;i++){var o=t[0]+r*i;if(o>t[1])break;n.push({color:this.getControllerVisual(o,"color",e),offset:i/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new ot.a("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,o=n.handleThumbs,l=n.handleLabels,h=r.itemSize,c=r.getExtent();xt([0,1],(function(d){var f=o[d];f.setStyle("fill",e.handlesColor[d]),f.y=t[d];var v=mt(t[d],[0,h[1]],c,!0),y=this.getControllerVisual(v,"symbolSize");f.scaleX=f.scaleY=y/h[0],f.x=h[0]-y/2;var _=st.applyTransform(n.handleLabelPoints[d],st.getTransform(f,this.group));l[d].setStyle({x:_[0],y:_[1],text:r.formatValueText(this._dataInterval[d]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,r){var o=this.visualMapModel,l=o.getExtent(),h=o.itemSize,c=[0,h[1]],d=this._shapes,f=d.indicator;if(f){f.attr("invisible",!1);var v=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),y=this.getControllerVisual(t,"symbolSize"),_=mt(t,l,c,!0),m=h[0]-y/2,x={x:f.x,y:f.y};f.y=_,f.x=m;var S=st.applyTransform(d.indicatorLabelPoint,st.getTransform(f,this.group)),w=d.indicatorLabel;w.attr("invisible",!1);var M=this._applyTransform("left",d.mainGroup),I="horizontal"===this._orient;w.setStyle({text:(n||"")+o.formatValueText(e),verticalAlign:I?M:"middle",align:I?"center":M});var O={x:m,y:_,style:{fill:v}},L={style:{x:S[0],y:S[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var C={duration:100,easing:"cubicInOut",additive:!0};f.x=x.x,f.y=x.y,f.animateTo(O,C),w.animateTo(L,C)}else f.attr(O),w.attr(L);this._firstShowIndicator=!1;var R=this._shapes.handleLabels;if(R)for(var i=0;i<R.length;i++)this._api.enterBlur(R[i])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,r=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);r[1]=bt(St(0,r[1]),n[1]),t._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,r=n.itemSize;if(n.option.hoverLink){var o=[0,r[1]],l=n.getExtent();t=bt(St(o[0],t),o[1]);var h=function(t,e,n){var r=6,o=t.get("hoverLinkDataSize");o&&(r=mt(o,e,n,!0)/2);return r}(n,l,o),c=[t-h,t+h],d=mt(t,o,l,!0),f=[mt(c[0],o,l,!0),mt(c[1],o,l,!0)];c[0]<o[0]&&(f[0]=-1/0),c[1]>o[1]&&(f[1]=1/0),e&&(f[0]===-1/0?this._showIndicator(d,f[1],"< ",h):f[1]===1/0?this._showIndicator(d,f[0],"> ",h):this._showIndicator(d,d,"≈ ",h));var v=this._hoverLinkDataIndices,y=[];(e||Mt(n))&&(y=this._hoverLinkDataIndices=n.findTargetDataIndices(f));var _=E.c(v,y);this._dispatchHighDown("downplay",ft(_[0],n)),this._dispatchHighDown("highlight",ft(_[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=Object(_t.a)(e).dataIndex){var r=Object(_t.a)(e),o=this.ecModel.getSeriesByIndex(r.seriesIndex);if(n.isTargetSeries(o)){var data=o.getData(r.dataType),l=data.get(n.getDataDimension(data),r.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this._api.leaveBlur(e[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ft(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,element,e,n){var r=st.getTransform(element,n?null:this.group);return l.r(t)?st.applyTransform(t,r,e):st.transformDirection(t,r,e)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(nt),Lt={type:"selectDataRange",event:"dataRangeSelected",update:"update"},Ct=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},Rt=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var r,o,h,c,d,f=t.pipelineContext;!e.isTargetSeries(t)||f&&f.large||n.push((r=e.stateList,o=e.targetVisuals,h=l.c(e.getValueState,e),c=e.getDataDimension(t.getData()),d={},l.j(r,(function(t){var e=j.prepareVisualTypes(o[t]);d[t]=e})),{progress:function(t,data){var e,n;function r(t){return Object(k.a)(data,n,t)}function l(t,e){Object(k.c)(data,n,t,e)}for(null!=c&&(e=data.getDimension(c));null!=(n=t.next());){var f=data.getRawDataItem(n);if(!f||!1!==f.visualMap)for(var v=null!=c?data.get(e,n):n,y=h(v),_=o[y],m=d[y],i=0,x=m.length;i<x;i++){var S=m[i];_[S]&&_[S].applyVisual(v,r,l)}}}}))})),n}},{createOnAllSeries:!0,reset:function(t,e){var data=t.getData(),n=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(l.c(Vt,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimension(data),h=data.getDimensionInfo(o);null!=h&&(r.dimension=h.index,n.push(r))}})),t.getData().setVisual("visualMeta",n)}}];function Vt(t,e,n,r){for(var o=e.targetVisuals[r],l=j.prepareVisualTypes(o),h={color:Object(k.b)(t.getData(),"color")},i=0,c=l.length;i<c;i++){var d=l[i],f=o["opacity"===d?"__alphaForOpacity":d];f&&f.applyVisual(n,v,y)}return h.color;function v(t){return h[t]}function y(t,e){h[t]=e}}var Tt=l.j;function zt(option){var t=option&&option.visualMap;l.r(t)||(t=t?[t]:[]),Tt(t,(function(t){if(t){Dt(t,"splitList")&&!Dt(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&l.r(e)&&Tt(e,(function(t){l.x(t)&&(Dt(t,"start")&&!Dt(t,"min")&&(t.min=t.start),Dt(t,"end")&&!Dt(t,"max")&&(t.max=t.end))}))}}))}function Dt(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var jt=!1;function kt(t){jt||(jt=!0,t.registerSubTypeDefaulter("visualMap",(function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"})),t.registerAction(Lt,Ct),Object(l.j)(Rt,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(zt))}function Pt(t){t.registerComponentModel(J),t.registerComponentView(Ot),kt(t)}var Ht=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return Object(o.a)(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],Bt[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var o=this.option.categories;this.resetVisual((function(t,e){"categories"===r?(t.mappingMethod="category",t.categories=l.d(o)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=l.E(this._pieceList,(function(t){return t=l.d(t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var option=this.option,e={},n=j.listVisualTypes(),r=this.isCategory();function o(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}l.j(option.pieces,(function(t){l.j(n,(function(n){t.hasOwnProperty(n)&&(e[n]=1)}))})),l.j(e,(function(t,e){var n=!1;l.j(this.stateList,(function(t){n=n||o(option,t,e)||o(option.target,t,e)}),this),!n&&l.j(this.stateList,(function(t){(option[t]||(option[t]={}))[e]=f.get(e,"inRange"===t?"active":"inactive",r)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,r=this._pieceList,o=(e?n:t).selected||{};if(n.selected=o,l.j(r,(function(t,e){var n=this.getSelectedMapKey(t);o.hasOwnProperty(n)||(o[n]=!0)}),this),"single"===n.selectedMode){var h=!1;l.j(r,(function(t,e){var n=this.getSelectedMapKey(t);o[n]&&(h?o[n]=!1:h=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=l.d(t)},e.prototype.getValueState=function(t){var e=j.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(r){var o=[],data=r.getData();data.each(this.getDataDimension(data),(function(e,r){j.findPieceIndex(e,n)===t&&o.push(r)}),this),e.push({seriesId:r.id,dataIndex:o})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],r=this,o=this._pieceList.slice();if(o.length){var h=o[0].interval[0];h!==-1/0&&o.unshift({interval:[-1/0,h]}),(h=o[o.length-1].interval[1])!==1/0&&o.push({interval:[h,1/0]})}else o.push({interval:[-1/0,1/0]});var c=-1/0;return l.j(o,(function(t){var e=t.interval;e&&(e[0]>c&&d([c,e[0]],"outOfRange"),d(e.slice()),c=e[1])}),this),{stops:e,outerColors:n}}function d(o,l){var h=r.getRepresentValue({interval:o});l||(l=r.getValueState(h));var c=t(h,l);o[0]===-1/0?n[0]=c:o[1]===1/0?n[1]=c:e.push({value:o[0],color:c},{value:o[1],color:c})}},e.type="visualMap.piecewise",e.defaultOption=Object(component.d)(Y.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(Y),Bt={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),r=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;for(var h=(r[1]-r[0])/o;+h.toFixed(n)!==h&&n<5;)n++;e.precision=n,h=+h.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var c=0,d=r[0];c<o;d+=h,c++){var f=c===o-1?r[1]:d+h;t.push({interval:[d,f],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),Object(y.n)(t),l.j(t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;l.j(e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),Et(e,t)},pieces:function(t){var e=this.option;l.j(e.pieces,(function(e,n){l.x(e)||(e={value:e});var r={text:"",index:n};if(null!=e.label&&(r.text=e.label),e.hasOwnProperty("value")){var o=r.value=e.value;r.interval=[o,o],r.close=[1,1]}else{for(var h=r.interval=[],c=r.close=[0,0],d=[1,0,1],f=[-1/0,1/0],v=[],y=0;y<2;y++){for(var _=[["gte","gt","min"],["lte","lt","max"]][y],i=0;i<3&&null==h[y];i++)h[y]=e[_[i]],c[y]=d[i],v[y]=2===i;null==h[y]&&(h[y]=f[y])}v[0]&&h[1]===1/0&&(c[0]=0),v[1]&&h[0]===-1/0&&(c[1]=0),h[0]===h[1]&&c[0]&&c[1]&&(r.value=h[0])}r.visual=j.retrieveVisuals(e),t.push(r)}),this),Et(e,t),Object(y.n)(t),l.j(t,(function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function Et(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var At=Ht,Ft=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(o.a)(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),r=e.textStyleModel,o=r.getFont(),h=r.getTextColor(),c=this._getItemAlign(),d=e.itemSize,f=this._getViewData(),v=f.endsText,y=l.K(e.get("showLabel",!0),!v);v&&this._renderEndsText(t,v[0],d,y,c),l.j(f.viewPieceList,(function(r){var f=r.piece,v=new ot.a;v.onclick=l.c(this._onItemClick,this,f),this._enableHoverLink(v,r.indexInModelPieceList);var _=e.getRepresentValue(f);if(this._createItemSymbol(v,_,[0,0,d[0],d[1]]),y){var m=this.visualMapModel.getValueState(_);v.add(new at.a({style:{x:"right"===c?-n:d[0]+n,y:d[1]/2,text:f.text,verticalAlign:"middle",align:c,font:o,fill:h,opacity:"outOfRange"===m?.5:1}}))}t.add(v)}),this),v&&this._renderEndsText(t,v[1],d,y,c),it.a(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return r("highlight")})).on("mouseout",(function(){return r("downplay")}));var r=function(t){var r=n.visualMapModel;r.option.hoverLink&&n.api.dispatchAction({type:t,batch:ft(r.findTargetDataIndices(e),r)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return pt(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,text,e,n,r){if(text){var o=new ot.a,l=this.visualMapModel.textStyleModel;o.add(new at.a({style:{x:n?"right"===r?e[0]:0:e[0]/2,y:e[1]/2,verticalAlign:"middle",align:n?r:"center",text:text,font:l.getFont(),fill:l.getTextColor()}})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=l.E(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),r=t.get("orient"),o=t.get("inverse");return("horizontal"===r?o:!o)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(Object(symbol.a)(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,option=e.option,n=l.d(option.selected),r=e.getSelectedMapKey(t);"single"===option.selectedMode?(n[r]=!0,l.j(n,(function(t,e){n[e]=e===r}))):n[r]=!n[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})},e.type="visualMap.piecewise",e}(nt);function Gt(t){t.registerComponentModel(At),t.registerComponentView(Ft),kt(t)}function Wt(t){Object(r.a)(Pt),Object(r.a)(Gt)}},475:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n(311),o=n(443),l=n(322),h=n(328),c=n(309),d=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var canvas=c.e();this.canvas=canvas}return t.prototype.update=function(data,t,e,n,r,o){var l=this._getBrush(),h=this._getGradient(r,"inRange"),c=this._getGradient(r,"outOfRange"),d=this.pointSize+this.blurSize,canvas=this.canvas,f=canvas.getContext("2d"),v=data.length;canvas.width=t,canvas.height=e;for(var i=0;i<v;++i){var p=data[i],y=p[0],_=p[1],m=n(p[2]);f.globalAlpha=m,f.drawImage(l,y-d,_-d)}if(!canvas.width||!canvas.height)return canvas;for(var x=f.getImageData(0,0,canvas.width,canvas.height),S=x.data,w=0,M=S.length,I=this.minOpacity,O=this.maxOpacity-I;w<M;){m=S[w+3]/256;var L=4*Math.floor(255*m);if(m>0){var C=o(m)?h:c;m>0&&(m=m*O+I),S[w++]=C[L],S[w++]=C[L+1],S[w++]=C[L+2],S[w++]=C[L+3]*m*256}else w+=4}return f.putImageData(x,0,0),canvas},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=c.e()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var r=t.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,r=n[e]||(n[e]=new Uint8ClampedArray(1024)),o=[0,0,0,0],l=0,i=0;i<256;i++)t[e](i/255,!0,o),r[l++]=o[0],r[l++]=o[1],r[l++]=o[2],r[l++]=o[3];return r},t}(),f=n(413),v=n(436),y=n(348);function _(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var m=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.render=function(t,e,n){var r;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(r=e)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var o=t.coordinateSystem;"cartesian2d"===o.type||"calendar"===o.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):_(o)&&this._renderOnGeo(o,t,r,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,r){var o=e.coordinateSystem;o&&(_(o)?this.render(e,n,r):this._renderOnCartesianAndCalendar(e,r,t.start,t.end,!0))},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,r,l){var c,d,f,_,m=t.coordinateSystem;if(Object(v.a)(m,"cartesian2d")){var x=m.getAxis("x"),S=m.getAxis("y");0,c=x.getBandWidth(),d=S.getBandWidth(),f=x.scale.getExtent(),_=S.scale.getExtent()}for(var w=this.group,data=t.getData(),M=t.getModel(["emphasis","itemStyle"]).getItemStyle(),I=t.getModel(["blur","itemStyle"]).getItemStyle(),O=t.getModel(["select","itemStyle"]).getItemStyle(),L=Object(y.d)(t),C=t.get(["emphasis","focus"]),R=t.get(["emphasis","blurScope"]),V=Object(v.a)(m,"cartesian2d")?[data.mapDimension("x"),data.mapDimension("y"),data.mapDimension("value")]:[data.mapDimension("time"),data.mapDimension("value")],T=n;T<r;T++){var rect=void 0,style=data.getItemVisual(T,"style");if(Object(v.a)(m,"cartesian2d")){var z=data.get(V[0],T),D=data.get(V[1],T);if(isNaN(data.get(V[2],T))||z<f[0]||z>f[1]||D<_[0]||D>_[1])continue;var j=m.dataToPoint([z,D]);rect=new o.a({shape:{x:Math.floor(Math.round(j[0])-c/2),y:Math.floor(Math.round(j[1])-d/2),width:Math.ceil(c),height:Math.ceil(d)},style:style})}else{if(isNaN(data.get(V[1],T)))continue;rect=new o.a({z2:1,shape:m.dataToRect([data.get(V[0],T)]).contentShape,style:style})}var k=data.getItemModel(T);if(data.hasItemOption){var P=k.getModel("emphasis");M=P.getModel("itemStyle").getItemStyle(),I=k.getModel(["blur","itemStyle"]).getItemStyle(),O=k.getModel(["select","itemStyle"]).getItemStyle(),C=P.get("focus"),R=P.get("blurScope"),L=Object(y.d)(k)}var H=t.getRawValue(T),B="-";H&&null!=H[2]&&(B=H[2]+""),Object(y.f)(rect,L,{labelFetcher:t,labelDataIndex:T,defaultOpacity:style.opacity,defaultText:B}),rect.ensureState("emphasis").style=M,rect.ensureState("blur").style=I,rect.ensureState("select").style=O,Object(h.m)(rect,C,R),rect.incremental=l,l&&(rect.states.emphasis.hoverLayer=!0),w.add(rect),data.setItemGraphicEl(T,rect)}},e.prototype._renderOnGeo=function(t,e,n,r){var o=n.targetVisuals.inRange,h=n.targetVisuals.outOfRange,data=e.getData(),f=this._hmLayer||this._hmLayer||new d;f.blurSize=e.get("blurSize"),f.pointSize=e.get("pointSize"),f.minOpacity=e.get("minOpacity"),f.maxOpacity=e.get("maxOpacity");var rect=t.getViewRect().clone(),v=t.getRoamTransform();rect.applyTransform(v);var y=Math.max(rect.x,0),_=Math.max(rect.y,0),m=Math.min(rect.width+rect.x,r.getWidth()),x=Math.min(rect.height+rect.y,r.getHeight()),S=m-y,w=x-_,M=[data.mapDimension("lng"),data.mapDimension("lat"),data.mapDimension("value")],I=data.mapArray(M,(function(e,n,r){var o=t.dataToPoint([e,n]);return o[0]-=y,o[1]-=_,o.push(r),o})),O=n.getExtent(),L="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(O,n.option.range):function(t,e,n){var r=t[1]-t[0],o=(e=c.E(e,(function(e){return{interval:[(e.interval[0]-t[0])/r,(e.interval[1]-t[0])/r]}}))).length,l=0;return function(t){var i;for(i=l;i<o;i++)if((r=e[i].interval)[0]<=t&&t<=r[1]){l=i;break}if(i===o)for(i=l-1;i>=0;i--){var r;if((r=e[i].interval)[0]<=t&&t<=r[1]){l=i;break}}return i>=0&&i<o&&n[i]}}(O,n.getPieceList(),n.option.selected);f.update(I,S,w,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:h.color.getColorMapper()},L);var img=new l.a({style:{width:S,height:w,x:y,y:_,image:f.canvas},silent:!0});this.group.add(img)},e.type="heatmap",e}(f.a),x=n(421),S=n(441),w=n(423),M=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(r.a)(e,t),e.prototype.getInitialData=function(option,t){return Object(S.a)(this.getSource(),this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=w.a.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(x.a);function I(t){t.registerChartView(m),t.registerSeriesModel(M)}},476:function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var r=n(347),o=n(309),l=n(315),h=n(364),c=n(340),d=n(425),f=n(378),v=n(317);function y(){return!1}function _(t,e,n){var r=o.e(),l=e.getWidth(),h=e.getHeight(),c=r.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=h+"px",r.setAttribute("data-zr-dom-id",t)),r.width=l*n,r.height=h*n,r}var m=function(t){function e(e,n,l){var h,c=t.call(this)||this;c.motionBlur=!1,c.lastFrameAlpha=.7,c.dpr=1,c.virtual=!1,c.config={},c.incremental=!1,c.zlevel=0,c.maxRepaintRectCount=5,c.__dirty=!0,c.__firstTimePaint=!0,c.__used=!1,c.__drawIndex=0,c.__startIndex=0,c.__endIndex=0,c.__prevStartIndex=null,c.__prevEndIndex=null,l=l||r.e,"string"==typeof e?h=_(e,n,l):o.x(e)&&(e=(h=e).id),c.id=e,c.dom=h;var d=h.style;return d&&(h.onselectstart=y,d.webkitUserSelect="none",d.userSelect="none",d.webkitTapHighlightColor="rgba(0,0,0,0)",d["-webkit-touch-callout"]="none",d.padding="0",d.margin="0",d.borderWidth="0"),c.domBack=null,c.ctxBack=null,c.painter=n,c.config=null,c.dpr=l,c}return Object(l.a)(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=_("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,r){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o,l=[],h=this.maxRepaintRectCount,d=!1,f=new v.a(0,0,0,0);function y(rect){if(rect.isFinite()&&!rect.isZero())if(0===l.length){(t=new v.a(0,0,0,0)).copy(rect),l.push(t)}else{for(var t,e=!1,n=1/0,r=0,i=0;i<l.length;++i){var o=l[i];if(o.intersect(rect)){var c=new v.a(0,0,0,0);c.copy(o),c.union(rect),l[i]=c,e=!0;break}if(d){f.copy(rect),f.union(o);var y=rect.width*rect.height,_=o.width*o.height,m=f.width*f.height-y-_;m<n&&(n=m,r=i)}}if(d&&(l[r].union(rect),e=!0),!e)(t=new v.a(0,0,0,0)).copy(rect),l.push(t);d||(d=l.length>=h)}}for(var i=this.__startIndex;i<this.__endIndex;++i){if(x=t[i]){var _=x.shouldBePainted(n,r,!0,!0);(S=x.__isRendered&&(x.__dirty&c.a.REDARAW_BIT||!_)?x.getPrevPaintRect():null)&&y(S);var m=_&&(x.__dirty&c.a.REDARAW_BIT||!x.__isRendered)?x.getPaintRect():null;m&&y(m)}}for(i=this.__prevStartIndex;i<this.__prevEndIndex;++i){var x,S;_=(x=e[i]).shouldBePainted(n,r,!0,!0);if(x&&(!_||!x.__zr)&&x.__isRendered)(S=x.getPrevPaintRect())&&y(S)}do{o=!1;for(i=0;i<l.length;)if(l[i].isZero())l.splice(i,1);else{for(var w=i+1;w<l.length;)l[i].intersect(l[w])?(o=!0,l[i].union(l[w]),l.splice(w,1)):w++;i++}}while(o);return this._paintRects=l,l},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,r=this.dom,o=r.style,l=this.domBack;o&&(o.width=t+"px",o.height=e+"px"),r.width=t*n,r.height=e*n,l&&(l.width=t*n,l.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var r=this.dom,l=this.ctx,h=r.width,c=r.height;e=e||this.clearColor;var v=this.motionBlur&&!t,y=this.lastFrameAlpha,_=this.dpr,m=this;v&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,h/_,c/_));var x=this.domBack;function S(t,n,r,h){if(l.clearRect(t,n,r,h),e&&"transparent"!==e){var c=void 0;o.v(e)?(c=e.__canvasGradient||Object(d.a)(l,e,{x:0,y:0,width:r,height:h}),e.__canvasGradient=c):o.y(e)&&(c=Object(f.c)(l,e,{dirty:function(){m.setUnpainted(),m.__painter.refresh()}})),l.save(),l.fillStyle=c||e,l.fillRect(t,n,r,h),l.restore()}v&&(l.save(),l.globalAlpha=y,l.drawImage(x,t,n,r,h),l.restore())}!n||v?S(0,0,h,c):n.length&&o.j(n,(function(rect){S(rect.x*_,rect.y*_,rect.width*_,rect.height*_)}))},e}(h.a),x=n(431),S=n(322),w=n(316),M=1e5,I=314159,O=.01;function L(t){return parseInt(t,10)}var C=function(){function t(t,e,n,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var h=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=o.l({},n||{}),this.dpr=n.devicePixelRatio||r.e,this._singleCanvas=h,this.root=t;var c=t.style;c&&(c.webkitTapHighlightColor="transparent",c.webkitUserSelect="none",c.userSelect="none",c["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var d=this._zlevelList;this._prevDisplayList=[];var f=this._layers;if(h){var v=t,y=v.width,_=v.height;null!=n.width&&(y=n.width),null!=n.height&&(_=n.height),this.dpr=n.devicePixelRatio||1,v.width=y*this.dpr,v.height=_*this.dpr,this._width=y,this._height=_;var x=new m(v,this,this.dpr);x.__builtin__=!0,x.initContext(),f[314159]=x,x.zlevel=I,d.push(I),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var S=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(S)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var i=0;i<r.length;i++){var o=r[i],l=this._layers[o];if(!l.__builtin__&&l.refresh){var h=0===i?this._backgroundColor:null;l.refresh(h)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var r,o={inHover:!0,viewWidth:this._width,viewHeight:this._height},i=0;i<e;i++){var l=t[i];l.__inHover&&(n||(n=this._hoverlayer=this.getLayer(M)),r||(r=n.ctx).save(),Object(f.a)(r,l,o,i===e-1))}r&&r.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(M)},t.prototype.paintOne=function(t,e){Object(f.b)(t,e)},t.prototype._paintList=function(t,e,n,r){if(this._redrawId===r){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,e,n),l=o.finished,h=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(t),l)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var c=this;Object(x.a)((function(){c._paintList(t,e,n,r)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(I).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var r=this,l=[],h=this._opts.useDirtyRect,c=0;c<this._zlevelList.length;c++){var d=this._zlevelList[c],f=this._layers[d];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||n)&&l.push(f)}for(var v=!0,y=!1,_=function(o){var c=l[o],d=c.ctx,f=h&&c.createRepaintRects(t,e,m._width,m._height);d.save();var i,_=n?c.__startIndex:c.__drawIndex,x=!n&&c.incremental&&Date.now,S=x&&Date.now(),w=c.zlevel===m._zlevelList[0]?m._backgroundColor:null;if(c.__startIndex===c.__endIndex)c.clear(!1,w,f);else if(_===c.__startIndex){var M=t[_];M.incremental&&M.notClear&&!n||c.clear(!1,w,f)}-1===_&&(console.error("For some unknown reason. drawIndex is -1"),_=c.__startIndex);var I=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(i=_;i<c.__endIndex;i++){var o=t[i];if(o.__inHover&&(y=!0),r._doPaintEl(o,c,h,e,n,i===c.__endIndex-1),x)if(Date.now()-S>15)break}n.prevElClipPaths&&d.restore()};if(f)if(0===f.length)i=c.__endIndex;else for(var O=m.dpr,L=0;L<f.length;++L){var rect=f[L];d.save(),d.beginPath(),d.rect(rect.x*O,rect.y*O,rect.width*O,rect.height*O),d.clip(),I(rect),d.restore()}else d.save(),I(),d.restore();c.__drawIndex=i,c.__drawIndex<c.__endIndex&&(v=!1)},m=this,x=0;x<l.length;x++)_(x);return w.a.wxa&&o.j(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:v,needsRefreshHover:y}},t.prototype._doPaintEl=function(t,e,n,r,o,l){var h=e.ctx;if(n){var c=t.getPaintRect();(!r||c&&c.intersect(r))&&(Object(f.a)(h,t,o,l),t.setPrevPaintRect(c))}else Object(f.a)(h,t,o,l)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=I);var n=this._layers[t];return n||((n=new m("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?o.F(n,this._layerConfig[t],!0):this._layerConfig[t-O]&&o.F(n,this._layerConfig[t-O],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,r=this._zlevelList,l=r.length,h=this._domRoot,c=null,i=-1;if(n[t])o.D("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(l>0&&t>r[0]){for(i=0;i<l-1&&!(r[i]<t&&r[i+1]>t);i++);c=n[r[i]]}if(r.splice(i+1,0,t),n[t]=e,!e.virtual)if(c){var d=c.dom;d.nextSibling?h.insertBefore(e.dom,d.nextSibling):h.appendChild(e.dom)}else h.firstChild?h.insertBefore(e.dom,h.firstChild):h.appendChild(e.dom);e.__painter=this}else o.D("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i];t.call(e,this._layers[r],r)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__&&t.call(e,o,r)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__||t.call(e,o,r)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){l&&(l.__endIndex!==t&&(l.__dirty=!0),l.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){if((d=t[n]).zlevel!==t[n-1].zlevel||d.incremental){this._needsManuallyCompositing=!0;break}}var r,i,l=null,h=0;for(i=0;i<t.length;i++){var d,f=(d=t[i]).zlevel,v=void 0;r!==f&&(r=f,h=0),d.incremental?((v=this.getLayer(f+.001,this._needsManuallyCompositing)).incremental=!0,h=1):v=this.getLayer(f+(h>0?O:0),this._needsManuallyCompositing),v.__builtin__||o.D("ZLevel "+f+" has been used by unkown layer "+v.id),v!==l&&(v.__used=!0,v.__startIndex!==i&&(v.__dirty=!0),v.__startIndex=i,v.incremental?v.__drawIndex=-1:v.__drawIndex=i,e(i),l=v),d.__dirty&c.a.REDARAW_BIT&&!d.__inHover&&(v.__dirty=!0,v.incremental&&v.__drawIndex<0&&(v.__drawIndex=i))}e(i),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,o.j(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?o.F(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];if(r===t||r===t+O){var l=this._layers[r];o.F(l,n[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(o.p(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(I).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new m("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var r=e.dom.width,o=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,r,o):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var l={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),i=0,c=h.length;i<c;i++){var d=h[i];Object(f.a)(n,d,l,i===c-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var h=this.root,c=document.defaultView.getComputedStyle(h);return(h[r]||L(c[n])||L(h.style[n]))-(L(c[o])||0)-(L(c[l])||0)|0},t.prototype.pathToImage=function(path,t){t=t||this.dpr;var canvas=document.createElement("canvas"),e=canvas.getContext("2d"),rect=path.getBoundingRect(),style=path.style,n=style.shadowBlur*t,r=style.shadowOffsetX*t,l=style.shadowOffsetY*t,h=path.hasStroke()?style.lineWidth:0,c=Math.max(h/2,-r+n),d=Math.max(h/2,r+n),v=Math.max(h/2,-l+n),y=Math.max(h/2,l+n),_=rect.width+c+d,m=rect.height+v+y;canvas.width=_*t,canvas.height=m*t,e.scale(t,t),e.clearRect(0,0,_,m),e.dpr=t;var x={x:path.x,y:path.y,scaleX:path.scaleX,scaleY:path.scaleY,rotation:path.rotation,originX:path.originX,originY:path.originY};path.x=c-rect.x,path.y=v-rect.y,path.rotation=0,path.scaleX=1,path.scaleY=1,path.updateTransform(),path&&Object(f.a)(e,path,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var w=new S.a({style:{x:0,y:0,image:canvas}});return o.l(path,x),w},t}();function R(t){t.registerPainter("canvas",C)}}}]);