(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{323:function(t,e,r){"use strict";var n=r(6),o=r(81),d=r(35),c=r(24),l=r(10),f=r(354),v=r(144),h=r(355),_=r(356),k=r(83),m=r(357),C=[],w=C.sort,x=l((function(){C.sort(void 0)})),y=l((function(){C.sort(null)})),R=v("sort"),S=!l((function(){if(k)return k<70;if(!(h&&h>3)){if(_)return!0;if(m)return m<603;var code,t,e,r,n="";for(code=65;code<76;code++){switch(t=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)C.push({k:t+r,v:e})}for(C.sort((function(a,b){return b.v-a.v})),r=0;r<C.length;r++)t=C[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:x||!y||!R||!S},{sort:function(t){void 0!==t&&o(t);var e=d(this);if(S)return void 0===t?w.call(e):w.call(e,t);var r,n,l=[],v=c(e.length);for(n=0;n<v;n++)n in e&&l.push(e[n]);for(r=(l=f(l,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:String(e)>String(r)?1:-1}}(t))).length,n=0;n<r;)e[n]=l[n++];for(;n<v;)delete e[n++];return e}})},354:function(t,e){var r=Math.floor,n=function(t,e){var c=t.length,l=r(c/2);return c<8?o(t,e):d(n(t.slice(0,l),e),n(t.slice(l),e),e)},o=function(t,e){for(var element,r,n=t.length,i=1;i<n;){for(r=i,element=t[i];r&&e(t[r-1],element)>0;)t[r]=t[--r];r!==i++&&(t[r]=element)}return t},d=function(t,e,r){for(var n=t.length,o=e.length,d=0,c=0,l=[];d<n||c<o;)d<n&&c<o?l.push(r(t[d],e[c])<=0?t[d++]:e[c++]):l.push(d<n?t[d++]:e[c++]);return l};t.exports=n},355:function(t,e,r){var n=r(80).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},356:function(t,e,r){var n=r(80);t.exports=/MSIE|Trident/.test(n)},357:function(t,e,r){var n=r(80).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},383:function(t,e,r){"use strict";r.r(e);var n=r(11),o=(r(61),r(63),r(323),r(14),r(82),r(310)),d=r(33),c=r(145),l=Object(o.c)({components:{Grid:c.b},props:{uid:{default:null,type:String},strategy_id:{default:null,type:String},position_id:{default:null,type:String},positionPredefined:{default:null,type:Object}},data:function(){var t=this;return{position:null,cols:[{name:"股票"},{name:"動作",formatter:function(e){return t.$gridjs.html('<div style="color:\n                '.concat(t.stockStatusColor(e),'\n                ">').concat(e,"</div>"))}},{name:"權重",formatter:function(e){return t.$gridjs.html("<div>".concat(e,"%</div>"))}},{name:"累積漲跌",formatter:function(e){return t.$gridjs.html('<div style="color:\n                '.concat(t.stockReturnColor(e),'\n                ">').concat(t.sign(e),"%</div>"))}},"收盤訊號"],table:[],userCap:20,next_trading_date:null,update_date:null,trade_at:null}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,o,table,p,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.strategy_id&&t.position_id||t.positionPredefined){e.next=2;break}return e.abrupt("return");case 2:if(r=null,!t.positionPredefined){e.next=7;break}r=t.positionPredefined,e.next=18;break;case 7:return e.prev=7,e.next=10,d.c.collection("users").doc(t.uid).collection("strategies").doc(t.strategy_id).collection("positions").doc(t.position_id).get();case 10:n=e.sent,r=n.data(),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(7),console.log("PositionPanel: cannot read position"+e.t0),e.abrupt("return");case 18:for(p in o=r,t.next_trading_date=o.next_trading_date,t.update_date=o.update_date,t.trade_at=o.trade_at,delete o.next_trading_date,delete o.update_date,delete o.trade_at,t.position=o,table=[],o)c=o[p],l=[p,c.status,Math.round(1e3*c.weight)/10,Math.round(1e3*c.return)/10,c.entry_date+" - "+(""===c.exit_date?"至今":c.exit_date)],table.push(l);t.table=table.sort((function(a,b){return(a[1]>b[1])-.5}));case 29:case"end":return e.stop()}}),e,null,[[7,14]])})))()},methods:{stockStatusColor:function(t){return{"買進":"#ff3385","持有":"gray","賣出":"#08c79e"}[t]},stockReturnColor:function(t){return 0===t?"gray":t>0?"#ff3385":"#08c79e"},sign:function(t){return t>0?"+"+t.toString():t.toString()}},computed:{rows:function(){var t=[];for(var e in this.table){var r=Object.assign([],this.table[e]);t.push(r)}return t},unrealizedReturn:function(){var t=0,e=0;for(var r in this.table)"賣出"!==this.table[r][1]&&(t+=this.table[r][3],console.log(this.table[r][3],t),e+=1);return Math.round(t/e*10)/10},realizedReturn:function(){var t=0,e=0;for(var r in this.table)"賣出"===this.table[r][1]&&(t+=this.table[r][3],console.log(this.table[r][3],t),e+=1);return Math.round(t/e*10)/10}}}),f=r(45),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),t._v(" "),r("div",{staticClass:"uk-grid",attrs:{"uk-grid":""}},[r("div",{staticClass:"uk-width-2-3@s"},[r("grid",{attrs:{cols:t.cols,rows:t.rows,sort:!0,styles:{table:{"text-align":"right","font-size":"15px",width:"100%"},th:{"font-weight":"normal",background:"#eee"},td:{"border-right":"1px solid white","font-family":"Roboto, Helvetica, Arial, sans-serif",color:"#333"}},"auto-width":!1,width:"100%"}})],1),t._v(" "),r("div",{staticClass:"uk-width-1-3@s"},[r("div",{attrs:{"uk-sticky":"bottom: true"}},[r("div",{staticClass:"uk-card uk-card-default uk-padding uk-margin"},[r("div",{staticClass:"uk-child-width-1-2@s",attrs:{"uk-grid":""}},[r("div",[t._v("\n              未實現\n              "),r("div",{staticClass:"card-number",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.unrealizedReturn))+"%\n              ")])]),t._v(" "),r("div",[t._v("\n              已實現\n              "),r("div",{staticClass:"card-number",style:{color:t.stockReturnColor(t.unrealizedReturn)}},[t._v("\n                "+t._s(t.sign(t.realizedReturn))+"%\n              ")])])]),t._v(" "),r("div",{staticStyle:{"font-family":"Roboto, Helvetica, Arial, sans-serif"}},[r("div",[t._v("清單更新時間："+t._s(t.update_date))]),t._v(" "),r("div",[t._v("下次更新時間："+t._s(t.next_trading_date))])])]),t._v(" "),r("div",{staticClass:"uk-card uk-card-default uk-padding"},[t._v("\n          實單投入（萬元）\n          "),r("div",{staticClass:"uk-width-1-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.userCap,expression:"userCap"}],staticClass:"uk-input",attrs:{type:"text",placeholder:"總資金(萬)"},domProps:{value:t.userCap},on:{input:function(e){e.target.composing||(t.userCap=e.target.value)}}})]),t._v(" "),r("button",{staticClass:"uk-button uk-button-primary uk-width-1-1"},[t._v("\n            使用 Colab + 永豐 API 自動下單\n          ")])])])])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"chart-title"},[t._v("當前損益")])])}],!1,null,"53a4a547",null);e.default=component.exports}}]);