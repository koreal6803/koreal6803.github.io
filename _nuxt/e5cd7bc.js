(window.webpackJsonp=window.webpackJsonp||[]).push([[35,18],{325:function(t,e,n){var r=n(6),o=n(381),l=n(105);r({target:"Array",proto:!0},{fill:o}),l("fill")},381:function(t,e,n){"use strict";var r=n(35),o=n(107),l=n(24);t.exports=function(t){for(var e=r(this),n=l(e.length),c=arguments.length,d=o(c>1?arguments[1]:void 0,n),v=c>2?arguments[2]:void 0,m=void 0===v?n:o(v,n);m>d;)e[d++]=t;return e}},442:function(t,e,n){"use strict";n.r(e);var r=n(85),o=(n(325),{props:{data:{default:function(){return[1,3,2,4,6,5,3,3,6,7]}},canvasId:{default:"id"},width:{default:250},height:{default:100}},methods:{mapy:function(t){return(this.ymax-t)/(this.ymax-this.ymin)*this.height},mapx:function(t){return(t-this.xmin)/(this.xmax-this.xmin)*this.width}},data:function(){return{ymax:0,ymin:0,xmax:0,xmin:0}},mounted:function(){this.ymax=Math.max.apply(Math,Object(r.a)(this.data)),this.ymin=Math.min.apply(Math,Object(r.a)(this.data)),this.xmax=this.data.length-1,this.xmin=0;var t=document.getElementById(this.canvasId).getContext("2d");for(var i in t.beginPath(),t.moveTo(this.mapx(0),this.mapy(this.data[0])),this.data){var e=this.mapx(i),n=this.mapy(this.data[i]);t.lineTo(e,n)}t.lineTo(this.mapx(this.xmax),this.mapy(this.data[0])),t.lineTo(this.mapx(0),this.mapy(this.data[0])),t.strokeStyle="#ffffff",t.stroke();var o=t.createLinearGradient(0,0,this.width,0);for(var l in o.addColorStop(0,"#25278666"),o.addColorStop(1,"#25278600"),t.fillStyle=o,t.fill(),t.closePath(),t.beginPath(),t.lineWidth=.5,t.strokeStyle="#252786",t.moveTo(this.mapx(0),this.mapy(this.data[0])),this.data){var c=this.mapx(l),d=this.mapy(this.data[l]);t.lineTo(c,d)}t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle="#111111",t.lineWidth=.5,t.setLineDash([5,2]),t.moveTo(this.mapx(0),this.mapy(this.data[0])),t.lineTo(this.mapx(this.xmax),this.mapy(this.data[0])),t.stroke(),t.closePath()}}),l=n(45),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{attrs:{id:t.canvasId,width:t.width,height:t.height}})}),[],!1,null,null,null);e.default=component.exports},505:function(t,e,n){var content=n(556);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(47).default)("0e8d044a",content,!0,{sourceMap:!1})},554:function(t,e,n){t.exports=n.p+"img/icons.6abb2e6.png"},555:function(t,e,n){"use strict";n(505)},556:function(t,e,n){var r=n(46)(!1);r.push([t.i,"ul li[data-v-55853ab2]{padding:12px}",""]),t.exports=r},612:function(t,e,n){"use strict";n.r(e);n(41),n(32),n(40),n(56),n(36),n(57);var r=n(11),o=n(19),l=(n(61),n(14),n(82),n(33)),c=n(4),d=n(59);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={components:{LineCanvas:n(442).default},data:function(){return{strategyToRemove:null,newStrategyName:""}},mounted:function(){this.setRealTimeUpdate()},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({format_float:function(t){return Math.round(100*t)/100},addSign:function(t){return t>0?"+"+t.toString():t.toString()},addSignColor:function(t){return 0===t?"color:gray":t>0?"color:rgb(255, 82, 121)":"color:#00c9b7"},removeStrategy:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,d,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.c.collection("users").doc(t.$store.state.user.uid),r=n.collection("strategies").doc(t.strategyToRemove),o=r.collection("codes").doc("code"),d="strategies."+t.strategyToRemove,(v={})[d]=c.a.firestore.FieldValue.delete(),(m=l.c.batch()).update(n,v),m.delete(r),m.delete(o),e.prev=10,e.next=13,m.commit();case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(10),alert("cannot remove strategy!",e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[10,15]])})))()}},Object(d.b)({setRealTimeUpdate:"userInfo/setRealTimeUpdate"})),computed:Object(d.c)({userInfo:"userInfo"})},h=(n(555),n(45)),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("div",{staticClass:"uk-background-muted"},[r("div",{staticClass:"uk-container uk-padding"},[r("div",{staticClass:"uk-flex uk-flex-between"},[t._m(0),t._v(" "),r("div",{staticClass:"uk-visible@s"},[t._m(1),t._v(" "),t._m(2),t._v(" "),r("div",{attrs:{id:"modal-overflow","uk-modal":""}},[r("div",{staticClass:"uk-modal-dialog"},[r("button",{staticClass:"uk-modal-close-default",attrs:{type:"button","uk-close":""}}),t._v(" "),r("div",{staticClass:"uk-modal-body"},[r("div",{staticClass:"uk-margin"},[r("label",{staticClass:"uk-form-label",attrs:{for:"form-stacked-text"}},[t._v("策略名稱")]),t._v(" "),r("div",{staticClass:"uk-form-controls"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.newStrategyName,expression:"newStrategyName"}],staticClass:"uk-input",attrs:{id:"form-stacked-text",type:"text",placeholder:"策略名稱",autocomplete:"off"},domProps:{value:t.newStrategyName},on:{input:function(e){e.target.composing||(t.newStrategyName=e.target.value)}}})])]),t._v(" "),r("nuxt-link",{attrs:{to:"/strategy/?uid="+t.$store.state.user.uid+"&sid="+t.newStrategyName}},[r("button",{staticClass:"uk-button uk-button-primary uk-modal-close",attrs:{type:"button"}},[t._v("\n                      確定\n                    ")])]),t._v(" "),r("button",{staticClass:"uk-button uk-button-default uk-modal-close",attrs:{type:"button"}},[t._v("\n                    取消\n                  ")])],1)])])])])])]),t._v(" "),r("div",{staticClass:"uk-container uk-padding"},[t.$store.state.user?r("div",{staticClass:"uk-overflow-auto"},[t.userInfo.info&&t.userInfo.info.strategies?r("table",{staticClass:"uk-table uk-table-middle uk-table-divider uk-overflow-auto"},[t._m(3),t._v(" "),r("tbody",t._l(t.userInfo.info.strategies,(function(s,e){return r("tr",{key:e},[r("td",[r("nuxt-link",{attrs:{to:"/strategy/?uid="+t.$store.state.user.uid+"&sid="+e}},[t._v(t._s(e))])],1),t._v(" "),r("td",{style:t.addSignColor(s.annual_return)},[t._v("\n                "+t._s(t.addSign(t.format_float(100*s.annual_return)))+"%\n              ")]),t._v(" "),r("td",{style:t.addSignColor(s.max_drawdown)},[t._v("\n                "+t._s(t.addSign(t.format_float(100*s.max_drawdown)))+"%\n              ")]),t._v(" "),r("td",[t._v(t._s(t.addSign(t.format_float(s.sharpe_ratio))))]),t._v(" "),r("td",{style:t.addSignColor(s.ndays_return[5])},[t._v("\n                "+t._s(t.addSign(t.format_float(100*s.ndays_return[5])))+"%\n              ")]),t._v(" "),r("td",{style:t.addSignColor(s.ndays_return[60])},[t._v("\n                "+t._s(t.addSign(t.format_float(100*s.ndays_return[60])))+"%\n              ")]),t._v(" "),r("td",{staticClass:"uk-text-align:right",staticStyle:{width:"120px"}},[r("LineCanvas",{attrs:{data:s.cumulative_return,canvasId:"canvas-"+e.toString(),width:120,height:40}})],1),t._v(" "),r("td",[r("div",{staticClass:"uk-button",staticStyle:{width:"64px",padding:"0",margin:"0",color:"gray"}},[r("font-awesome-icon",{attrs:{icon:"cog",size:"lg"}})],1),t._v(" "),r("div",{attrs:{"uk-dropdown":"mode: click;"}},[r("ul",{staticClass:"uk-nav uk-dropdown-nav",staticStyle:{"font-size":"1rem"}},[r("li",[r("a",{attrs:{href:"#modal-remove-strategy","uk-toggle":""},on:{click:function(n){t.strategyToRemove=e}}},[t._v("刪除策略")])])])])])])})),0)]):t._e()]):t._e(),t._v(" "),!t.$store.state.user||t.userInfo.info&&t.userInfo.info.strategies&&0!==Object.keys(t.userInfo.info.strategies).length?t._e():r("div",{staticClass:"uk-text-center"},[t._m(4),t._v(" "),r("img",{attrs:{src:n(554),width:"600px"}}),r("br"),r("br")])])]),t._v(" "),r("div",{attrs:{id:"modal-remove-strategy","uk-modal":""}},[r("div",{staticClass:"uk-modal-dialog uk-modal-body"},[r("h3",{staticClass:"uk-modal-title",staticStyle:{"font-weight":"300"}},[t._v("\n        刪除策略： "+t._s(t.strategyToRemove)+"\n      ")]),t._v(" "),r("p",[t._v("是否要執行刪除策略的動作？")]),t._v(" "),r("p",{staticClass:"uk-text-right"},[r("button",{staticClass:"uk-button uk-button-default uk-modal-close",attrs:{type:"button"},on:{click:t.removeStrategy}},[t._v("\n          是，請刪除！\n        ")]),t._v(" "),r("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"button"}},[t._v("\n          否，按錯啦！\n        ")])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticClass:"uk-text-primary",staticStyle:{"font-weight":"300"}},[t._v("選股策略")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"uk-search uk-search-default",staticStyle:{width:"180px"}},[n("span",{staticClass:"uk-search-icon-flip",attrs:{"uk-search-icon":""}}),t._v(" "),n("input",{staticClass:"uk-search-input",attrs:{type:"search",placeholder:"搜尋策略"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"uk-button uk-button-primary",staticStyle:{width:"180px"}},[n("a",{staticStyle:{color:"white"},attrs:{href:"#modal-overflow","uk-toggle":""}},[t._v("建立新策略")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("\n                策略名稱"),n("br"),t._v("\n                Strategy\n              ")]),t._v(" "),n("th",[t._v("\n                總年化報酬"),n("br"),t._v("\n                Annual Return\n              ")]),t._v(" "),n("th",[t._v("\n                最大下跌幅度"),n("br"),t._v("\n                Max Drawdown\n              ")]),t._v(" "),n("th",[t._v("\n                夏普值"),n("br"),t._v("\n                Sharpe Ratio\n              ")]),t._v(" "),n("th",[t._v("週報酬"),n("br"),t._v("Weekly ROI")]),t._v(" "),n("th",[t._v("季報酬"),n("br"),t._v("Quarterly ROI")]),t._v(" "),n("th",[t._v("累積報酬"),n("br"),t._v("Cumulative ROI")]),t._v(" "),n("th",[t._v("設定"),n("br"),t._v("SETTING")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"uk-text-primary uk-padding"},[n("button",{staticClass:"uk-button uk-button-primary uk-button-large"},[n("a",{staticStyle:{color:"white"},attrs:{href:"#modal-overflow","uk-toggle":""}},[t._v("\n              製作你的選股策略\n            ")])])])}],!1,null,"55853ab2",null);e.default=component.exports;installComponents(component,{LineCanvas:n(442).default})}}]);